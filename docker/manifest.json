{
  "id": "docker",
  "name": "Docker Isolation",
  "version": "0.1.0",
  "description": "Docker Ïª®ÌÖåÏù¥ÎÑàÎ•º ÏÇ¨Ïö©Ìïú Í≤åÏûÑ ÏÑúÎ≤Ñ Í≤©Î¶¨ Ïã§Ìñâ",
  "author": "saba-chan",
  "min_app_version": "0.1.0",
  "dependencies": {
    "steamcmd": ">=0.1.0"
  },

  "python_modules": {
    "docker_engine": "docker_engine.py",
    "compose_manager": "compose_manager.py"
  },

  "hooks": {
    "daemon.startup": {
      "module": "docker_engine",
      "function": "ensure",
      "condition": null
    },
    "daemon.shutdown": {
      "module": "compose_manager",
      "function": "shutdown_all",
      "condition": null
    },
    "server.pre_create": {
      "module": "compose_manager",
      "function": "pre_create",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.post_create": {
      "module": "compose_manager",
      "function": "provision",
      "condition": "instance.ext_data.docker_enabled",
      "async": true
    },
    "server.pre_start": {
      "module": "compose_manager",
      "function": "start",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.post_stop": {
      "module": "compose_manager",
      "function": "stop",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.status": {
      "module": "compose_manager",
      "function": "status",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.stats": {
      "module": "compose_manager",
      "function": "container_stats",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.pre_delete": {
      "module": "compose_manager",
      "function": "cleanup",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.settings_changed": {
      "module": "compose_manager",
      "function": "regenerate_compose",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.list_enrich": {
      "module": "compose_manager",
      "function": "enrich_server_info",
      "condition": "instance.ext_data.docker_enabled"
    },
    "server.logs": {
      "module": "compose_manager",
      "function": "get_logs",
      "condition": "instance.ext_data.docker_enabled"
    }
  },

  "gui": {
    "bundle": "gui/dist/docker.umd.js",
    "slots": {
      "ServerCard.badge": "DockerBadge",
      "ServerCard.headerGauge": "DockerMiniGauge",
      "ServerCard.expandedStats": "DockerStatsRow",
      "ServerCard.provision": "DockerProvision",
      "ServerSettings.tab": "DockerTab",
      "AddServer.options": "DockerToggle"
    }
  },

  "cli": {
    "slots": {
      "InstanceList.badge": {
        "text": "üê≥",
        "condition": "instance.ext_data.docker_enabled"
      },
      "InstanceDetail.menu": [
        {
          "label": "üê≥ Docker Settings",
          "description": "Ïª®ÌÖåÏù¥ÎÑà Í≤©Î¶¨ ÏÑ§Ï†ï Ìé∏Ïßë",
          "action": "open_ext_settings"
        }
      ],
      "InstanceDetail.status": [
        {
          "label": "Container",
          "value_from": "container_status"
        }
      ],
      "CreateInstance.options": [
        {
          "field": "docker_enabled",
          "type": "boolean",
          "label": "üê≥ Enable Docker Isolation",
          "default": false
        }
      ]
    }
  },

  "module_config_section": "docker",

  "instance_fields": {
    "docker_enabled": { "type": "boolean", "default": false },
    "docker_cpu_limit": { "type": "number", "optional": true },
    "docker_memory_limit": { "type": "string", "optional": true }
  },

  "i18n_dir": "i18n/"
}
